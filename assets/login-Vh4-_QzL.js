import{_ as S,e as k,r as l,o as C,b as x,d as t,t as R,g as u,w as v,m as A,H as T,v as U,G as $,I as P,i as d,y as E,u as q,f as B,J as D,n as V,U as j,K as h,p as M,h as N,q as O}from"./index-cn_II9PW.js";import z from"./ContainerLayout-_v9H3vKN.js";import{T as G}from"./Translations-kSV5Kzvo.js";import"./lodash-kJQImg53.js";const H=k({name:"UserAccountLogin",components:{UserAccountContainerLayout:z,Promotion:T,Translations:G},setup(){const{proxy:e}=O(),m=U(),g=$(),_=P(),n=d(!0),a=d(""),s=d(""),c=E({email:"vite.admin@gmail.com",password:"123456"}),o=q(),p=B(()=>({title:o.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:n.value,size:"large"},text:o.t("login.signin"),on:{click(i){e.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:a.value,rules(){return[e.getRequiredRules({trigger:"change",message:o.t("login.plsemail")}),e.getValidatorRules("","blur",{type:"email",message:o.t("login.plscurrentemail")})]}},label:o.t("login.email"),prefixIcon:"user-tie",placeholder:o.t("login.plsemail")},{attrs:{prop:"password",error:s.value,rules(){return e.getRequiredRules({trigger:"change",message:o.t("login.plspwd")})}},link:{text:o.t("login.fgtpwd"),click(){}},type:"password",label:o.t("login.pwd"),prefixIcon:"lock",placeholder:o.t("login.plspwd")}]}));function r(i=!1){n.value=i}function w(i){n.value||i.validate(async b=>{if(!b)return;a.value="",s.value="",r(!0);const{error:I,data:f,msg:L}=await m.dispatch(j.getAction("login"),c);if(I){a.value=" ",s.value=L,r(!1);return}h.set("token",f.user.token),h.set("name",f.user.username),_.replace(`/${g.params.locale||""}`).then(()=>{e.$message({type:"success",message:"登录成功"})}).catch(()=>{})})}return r(!0),D(()=>{V(()=>{r(!1)})}),{isLoading:n,inputErrorEmail:a,inputErrorPassword:s,formData:c,configLogin:p,setLoading:r,onSubmit:w}}}),y=e=>(M("data-v-7d2aed07"),e=e(),N(),e),J={class:"user-account-login"},K={class:"user-account-nav"},F={class:"nav-left"},Q=y(()=>t("div",{class:"nav-logo"},null,-1)),W=y(()=>t("div",{class:"nav-circle"},null,-1)),X={class:"nav-title"},Y={class:"nav-right"},Z={class:"user-account-body"};function ee(e,m,g,_,n,a){const s=l("Translations"),c=l("Promotion"),o=l("el-icon"),p=l("UserAccountContainerLayout");return C(),x("div",J,[t("div",K,[t("div",F,[Q,W,t("div",X,R(e._t("base.systemTitle")),1)]),t("div",Y,[u(s)])]),t("div",Z,[u(p,A(e.configLogin,{"form-data":e.formData,onOnSubmit:e.onSubmit}),{titleIcon:v(()=>[u(o,null,{default:v(()=>[u(c)]),_:1})]),_:1},16,["form-data","onOnSubmit"])])])}const ae=S(H,[["render",ee],["__scopeId","data-v-7d2aed07"]]);export{ae as default};
