import{_ as L,e as S,o as k,b as x,d as s,t as R,g as c,w as v,m as A,H as T,v as U,G as $,I as P,i as d,y as E,u as q,f as B,J as D,n as V,r as l,U as j,K as h,p as F,h as M,q as N}from"./index-CPgBqrJM.js";import O from"./ContainerLayout-D4jXZdPh.js";import{T as z}from"./Translations-0LVqBfvn.js";import"./lodash-Dw5YnKQ-.js";const G=S({name:"UserAccountLogin",components:{UserAccountContainerLayout:O,Promotion:T,Translations:z},setup(){const{proxy:e}=N(),m=U(),g=$(),_=P(),a=d(!0),r=d(""),n=d(""),u=E({email:"vite.admin@gmail.com",password:"123456"}),o=q(),p=B(()=>({title:o.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:a.value,size:"large"},text:o.t("login.signin"),on:{click(i){e.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:r.value,rules(){return[e.getRequiredRules({trigger:"change",message:o.t("login.plsemail")}),e.getValidatorRules("","blur",{type:"email",message:o.t("login.plscurrentemail")})]}},label:o.t("login.email"),prefixIcon:"user-tie",placeholder:o.t("login.plsemail")},{attrs:{prop:"password",error:n.value,rules(){return e.getRequiredRules({trigger:"change",message:o.t("login.plspwd")})}},link:{text:o.t("login.fgtpwd"),click(){}},type:"password",label:o.t("login.pwd"),prefixIcon:"lock",placeholder:o.t("login.plspwd")}]}));function t(i=!1){a.value=i}function w(i){a.value||i.validate(async b=>{if(!b)return;r.value="",n.value="",t(!0);const{error:I,data:f,msg:C}=await m.dispatch(j.getAction("login"),u);if(I){r.value=" ",n.value=C,t(!1);return}h.set("token",f.user.token),h.set("name",f.user.username),_.replace(`/${g.params.locale||""}`).then(()=>{e.$message({type:"success",message:"登录成功"})}).catch(()=>{})})}return t(!0),D(()=>{V(()=>{t(!1)})}),{isLoading:a,inputErrorEmail:r,inputErrorPassword:n,formData:u,configLogin:p,setLoading:t,onSubmit:w}}}),y=e=>(F("data-v-ca9d25cf"),e=e(),M(),e),H={class:"user-account-login"},J={class:"user-account-nav"},K={class:"nav-left"},Q=y(()=>s("div",{class:"nav-logo"},null,-1)),W=y(()=>s("div",{class:"nav-circle"},null,-1)),X={class:"nav-title"},Y={class:"nav-right"},Z={class:"user-account-body"};function ee(e,m,g,_,a,r){const n=l("Translations"),u=l("Promotion"),o=l("el-icon"),p=l("UserAccountContainerLayout"),t=l("CustomFooter");return k(),x("div",H,[s("div",J,[s("div",K,[Q,W,s("div",X,R(e._t("base.systemTitle")),1)]),s("div",Y,[c(n)])]),s("div",Z,[c(p,A(e.configLogin,{"form-data":e.formData,onOnSubmit:e.onSubmit}),{titleIcon:v(()=>[c(o,null,{default:v(()=>[c(u)]),_:1})]),_:1},16,["form-data","onOnSubmit"])]),c(t)])}const ae=L(G,[["render",ee],["__scopeId","data-v-ca9d25cf"]]);export{ae as default};
