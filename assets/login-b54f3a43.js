import{Y as S,Q as k,R as x,P as v}from"./js.cookie-bee718ab.js";import R from"./ContainerLayout-ee8ac1a2.js";import{U as C}from"./index-75f4bb12.js";import{T as U}from"./Translations-77081ba9.js";import{u as A}from"./vuex.esm-bundler-c8671be2.js";import{ai as P,t as T,r as d,R as $,e as E,o as B,U as D,v as M,x as V,y as t,L as j,M as l,G as h,W as q,a7 as u,g as N,aE as O,aF as z}from"./_plugin-vue_export-helper-641f8b0e.js";import{u as F}from"./index-182f4358.js";import"./type-e4b589dd.js";import"./lodash-e9f1b42e.js";import"./_commonjsHelpers-725317a4.js";import"./request-8d76d42b.js";import"./mixin-a3ea3c4d.js";const G=T({name:"UserAccountLogin",components:{UserAccountContainerLayout:R,Promotion:S,Translations:U},setup(){const{proxy:e}=N(),m=A(),g=k(),_=x(),n=d(!0),a=d(""),s=d(""),c=$({email:"vite.admin@gmail.com",password:"123456"}),o=F(),p=E(()=>({title:o.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:n.value,size:"large"},text:o.t("login.signin"),on:{click(i){e.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:a.value,rules(){return[e.getRequiredRules({trigger:"change",message:o.t("login.plsemail")}),e.getValidatorRules("","blur",{type:"email",message:o.t("login.plscurrentemail")})]}},label:o.t("login.email"),prefixIcon:"user-tie",placeholder:o.t("login.plsemail")},{attrs:{prop:"password",error:s.value,rules(){return e.getRequiredRules({trigger:"change",message:o.t("login.plspwd")})}},link:{text:o.t("login.fgtpwd"),click(){}},type:"password",label:o.t("login.pwd"),prefixIcon:"lock",placeholder:o.t("login.plspwd")}]}));function r(i=!1){n.value=i}function w(i){n.value||i.validate(async L=>{if(!L)return;a.value="",s.value="",r(!0);const{error:b,data:f,msg:I}=await m.dispatch(C.getAction("login"),c);if(b){a.value=" ",s.value=I,r(!1);return}v.set("token",f.user.token),v.set("name",f.user.username),_.replace(`/${g.params.locale||""}`).then(()=>{e.$message({type:"success",message:"登录成功"})}).catch(()=>{})})}return r(!0),B(()=>{D(()=>{r(!1)})}),{isLoading:n,inputErrorEmail:a,inputErrorPassword:s,formData:c,configLogin:p,setLoading:r,onSubmit:w}}}),y=e=>(O("data-v-7d2aed07"),e=e(),z(),e),Q={class:"user-account-login"},W={class:"user-account-nav"},Y={class:"nav-left"},H=y(()=>t("div",{class:"nav-logo"},null,-1)),J=y(()=>t("div",{class:"nav-circle"},null,-1)),K={class:"nav-title"},X={class:"nav-right"},Z={class:"user-account-body"};function ee(e,m,g,_,n,a){const s=u("Translations"),c=u("Promotion"),o=u("el-icon"),p=u("UserAccountContainerLayout");return M(),V("div",Q,[t("div",W,[t("div",Y,[H,J,t("div",K,j(e._t("base.systemTitle")),1)]),t("div",X,[l(s)])]),t("div",Z,[l(p,q(e.configLogin,{"form-data":e.formData,onOnSubmit:e.onSubmit}),{titleIcon:h(()=>[l(o,null,{default:h(()=>[l(c)]),_:1})]),_:1},16,["form-data","onOnSubmit"])])])}const me=P(G,[["render",ee],["__scopeId","data-v-7d2aed07"]]);export{me as default};
