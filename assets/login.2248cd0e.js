import x from"./ContainerLayout.5265f618.js";import{_,U as I}from"./index.f929f16d.js";import{T as R}from"./Translations.973fa17b.js";import{I as S,a7 as A,u as P,g as T,h as U,O as g,P as C,W as E,i as O,a8 as $,V as q,r as c,o as D,s as V,t as s,H as j,m as u,l as b,G as z,M as G,d as y,$ as H,a0 as M}from"./vendor.bffc05bf.js";import"./lodash.caf8b874.js";const W=S({name:"UserAccountLogin",components:{UserAccountContainerLayout:x,Promotion:A,Translations:R},setup(){const{proxy:a}=G(),d=P(),p=T(),v=U(),o=g(!0),i=g(""),t=g(""),l=C({email:"vite.admin@gmail.com",password:"123456"}),e=E(),m=O(()=>({title:e.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:o.value,size:"large"},text:e.t("login.signin"),on:{click(r){a.onSubmit(r)}}}],formConfig:[{attrs:{prop:"email",error:i.value,rules:()=>[a.getRequiredRules({trigger:"change",message:e.t("login.plsemail")}),a.getValidatorRules("","blur",{type:"email",message:e.t("login.plscurrentemail")})]},label:e.t("login.email"),prefixIcon:"user-tie",placeholder:e.t("login.plsemail")},{attrs:{prop:"password",error:t.value,rules:()=>a.getRequiredRules({trigger:"change",message:e.t("login.plspwd")})},link:{text:e.t("login.fgtpwd"),click(){}},type:"password",label:e.t("login.pwd"),prefixIcon:"lock",placeholder:e.t("login.plspwd")}]}));function n(r=!1){o.value=r}return n(!0),$(()=>{q(()=>{n(!1)})}),{isLoading:o,inputErrorEmail:i,inputErrorPassword:t,formData:l,configLogin:m,setLoading:n,onSubmit:function(r){o.value||r.validate(async w=>{if(!w)return;i.value="",t.value="",n(!0);const{error:L,data:f,msg:k}=await d.dispatch(I.getAction("login"),l);if(L)return i.value=" ",t.value=k,void n(!1);y.set("token",f.user.token),y.set("name",f.user.username),v.replace(`/${p.params.locale||""}`).then(()=>{a.$message({type:"success",message:"\u767B\u5F55\u6210\u529F"})}).catch(()=>{})})}}}}),h=a=>(H("data-v-06fe38ba"),a=a(),M(),a),B={class:"user-account-login"},F={class:"user-account-nav"},J={class:"nav-left"},K=h(()=>s("div",{class:"nav-logo"},null,-1)),N=h(()=>s("div",{class:"nav-circle"},null,-1)),Q={class:"nav-title"},X={class:"nav-right"},Y={class:"user-account-body"};var oa=_(W,[["render",function(a,d,p,v,o,i){const t=c("Translations"),l=c("Promotion"),e=c("el-icon"),m=c("UserAccountContainerLayout");return D(),V("div",B,[s("div",F,[s("div",J,[K,N,s("div",Q,j(a._t("base.systemTitle")),1)]),s("div",X,[u(t)])]),s("div",Y,[u(m,z(a.configLogin,{"form-data":a.formData,onOnSubmit:a.onSubmit}),{titleIcon:b(()=>[u(e,null,{default:b(()=>[u(l)]),_:1})]),_:1},16,["form-data","onOnSubmit"])])])}],["__scopeId","data-v-06fe38ba"]]);export{oa as default};
