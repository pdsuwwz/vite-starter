import{Y as L,Q as k,R as x,P as v}from"./js.cookie-736eca92.js";import C from"./ContainerLayout-faf266a6.js";import{U as R}from"./index-2970672b.js";import{T as A}from"./Translations-a53f235a.js";import{u as P}from"./vuex.esm-bundler-979f16ef.js";import{ai as T,x as U,r as m,V as $,e as E,o as V,S as B,y as D,z as O,A as t,O as j,P as l,I as h,T as q,a7 as u,g as z,aE as M,aF as N}from"./_plugin-vue_export-helper-f1dda974.js";import{u as F}from"./index-7eb0f0a6.js";import"./type-f8ec5bac.js";import"./lodash-e9f1b42e.js";import"./_commonjsHelpers-725317a4.js";import"./request-159d2956.js";import"./mixin-70b7655c.js";import"./index-5c647c99.js";const Q=U({name:"UserAccountLogin",components:{UserAccountContainerLayout:C,Promotion:L,Translations:A},setup(){const{proxy:e}=z(),d=P(),g=k(),_=x(),n=m(!0),a=m(""),s=m(""),c=$({email:"vite.admin@gmail.com",password:"123456"}),o=F(),p=E(()=>({title:o.t("login.hydl"),actionList:[{attrs:{type:"primary",loading:n.value,size:"large"},text:o.t("login.signin"),on:{click(i){e.onSubmit(i)}}}],formConfig:[{attrs:{prop:"email",error:a.value,rules(){return[e.getRequiredRules({trigger:"change",message:o.t("login.plsemail")}),e.getValidatorRules("","blur",{type:"email",message:o.t("login.plscurrentemail")})]}},label:o.t("login.email"),prefixIcon:"user-tie",placeholder:o.t("login.plsemail")},{attrs:{prop:"password",error:s.value,rules(){return e.getRequiredRules({trigger:"change",message:o.t("login.plspwd")})}},link:{text:o.t("login.fgtpwd"),click(){}},type:"password",label:o.t("login.pwd"),prefixIcon:"lock",placeholder:o.t("login.plspwd")}]}));function r(i=!1){n.value=i}function w(i){n.value||i.validate(async I=>{if(!I)return;a.value="",s.value="",r(!0);const{error:S,data:f,msg:b}=await d.dispatch(R.getAction("login"),c);if(S){a.value=" ",s.value=b,r(!1);return}v.set("token",f.user.token),v.set("name",f.user.username),_.replace(`/${g.params.locale||""}`).then(()=>{e.$message({type:"success",message:"登录成功"})}).catch(()=>{})})}return r(!0),V(()=>{B(()=>{r(!1)})}),{isLoading:n,inputErrorEmail:a,inputErrorPassword:s,formData:c,configLogin:p,setLoading:r,onSubmit:w}}}),y=e=>(M("data-v-7d2aed07"),e=e(),N(),e),Y={class:"user-account-login"},G={class:"user-account-nav"},H={class:"nav-left"},J=y(()=>t("div",{class:"nav-logo"},null,-1)),K=y(()=>t("div",{class:"nav-circle"},null,-1)),W={class:"nav-title"},X={class:"nav-right"},Z={class:"user-account-body"};function ee(e,d,g,_,n,a){const s=u("Translations"),c=u("Promotion"),o=u("el-icon"),p=u("UserAccountContainerLayout");return D(),O("div",Y,[t("div",G,[t("div",H,[J,K,t("div",W,j(e._t("base.systemTitle")),1)]),t("div",X,[l(s)])]),t("div",Z,[l(p,q(e.configLogin,{"form-data":e.formData,onOnSubmit:e.onSubmit}),{titleIcon:h(()=>[l(o,null,{default:h(()=>[l(c)]),_:1})]),_:1},16,["form-data","onOnSubmit"])])])}const ge=T(Q,[["render",ee],["__scopeId","data-v-7d2aed07"]]);export{ge as default};
